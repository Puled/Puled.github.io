(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{3547:function(t,e,n){"use strict";n.r(e);n(60);var f={name:"staff-show",components:{profile:function(){return n.e(35).then(n.bind(null,3606))},usernav:function(){return n.e(36).then(n.bind(null,3607))},edit:function(){return n.e(34).then(n.bind(null,3608))}},data:function(){return{staff:{},prevStaff:{}}},computed:{currentView:function(){var t=this.$route.query.type;return-1!==["profile","nav","edit"].indexOf(t)?t:"profile"}},fetch:function(){var t=this.$nuxt.context,e=t.app,n=t.store,f=(t.redirect,t.params),a=t.query;if(f.staffId&&f.staffId===n.state.user.staff_uuid)return e.router.replace({path:"/staff",query:a})},beforeRouteEnter:function(t,e,n){n((function(t){t.fetchData()}))},beforeRouteLeave:function(t,e,n){"edit"===this.currentView?JSON.stringify(this.staff)!==JSON.stringify(this.prevStaff)?this.$confirm({title:"提示",msg:"内容暂未保存，是否确认离开？"}).then((function(t){t?n():n(!1)})):n():n()},methods:{fetchData:function(){var t=this,e=this.$route.path,n=this.$route.params.staffId,f="/staff".concat("/staff"===e?"":"s/".concat(n),"?place=staff_home");this.$http.get(f).then((function(e){var n=e.data;n.home_display_name&&(n.display_name=n.home_display_name),t.staff=n,t.prevStaff=JSON.parse(JSON.stringify(t.staff))})).catch((function(e){t.httpError(e)}))}}},a=n(12),r=Object(a.a)(f,(function(){var t=this.$createElement,e=this._self._c||t;return this.staff.id?e("div",["nav"===this.currentView?e("usernav",{attrs:{staff:this.staff}}):"profile"===this.currentView?e("profile",{attrs:{staff:this.staff}}):e("edit",{attrs:{staff:this.staff}})],1):this._e()}),[],!1,null,null,null);e.default=r.exports}}]);
//# sourceMappingURL=show.f664da4ee1044b2bcec3.js.map